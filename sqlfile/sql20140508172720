ALTER TABLE `DB_TUSI`.`tb_user` 
	ADD COLUMN `app_version` varchar(255) NOT NULL AFTER `device_type`, 
	ADD COLUMN `channel` varchar(255) NOT NULL AFTER `app_version`, 
	CHANGE COLUMN `status` `status` tinyint(4) NOT NULL DEFAULT '0' COMMENT '用户状态' AFTER `channel`, 
	CHANGE COLUMN `create_date` `create_date` datetime NOT NULL COMMENT '创建时间' AFTER `status`, 
	CHANGE COLUMN `update_date` `update_date` datetime NOT NULL COMMENT '更新时间' AFTER `create_date`;
ALTER TABLE `DB_TUSI`.`tb_user` 
	CHANGE COLUMN `app_version` `app_version` varchar(255) NOT NULL COMMENT '客户端版本', 
	CHANGE COLUMN `channel` `channel` varchar(255) NOT NULL COMMENT '渠道';


ALTER TABLE `DB_TUSI`.`tb_post_company` 
	ADD COLUMN `uid` int NOT NULL COMMENT '发帖人uid' AFTER `id`, 
	CHANGE COLUMN `post_id` `post_id` int(11) NOT NULL COMMENT '帖子id' AFTER `uid`, 
	CHANGE COLUMN `company_id` `company_id` int(11) NOT NULL COMMENT '公司id' AFTER `post_id`, 
	CHANGE COLUMN `start_index` `start_index` int(11) NOT NULL DEFAULT '-1' COMMENT '起始位置' AFTER `company_id`, 
	CHANGE COLUMN `end_index` `end_index` int(11) NOT NULL DEFAULT '-1' COMMENT '结束位置' AFTER `start_index`, 
	CHANGE COLUMN `daily_hot` `daily_hot` int(11) NOT NULL DEFAULT '0' COMMENT '天热度' AFTER `end_index`, 
	CHANGE COLUMN `weekly_hot` `weekly_hot` int(11) NOT NULL DEFAULT '0' COMMENT '周热度' AFTER `daily_hot`, 
	CHANGE COLUMN `monthly_hot` `monthly_hot` int(11) NOT NULL DEFAULT '0' COMMENT '月热度' AFTER `weekly_hot`, 
	CHANGE COLUMN `total_hot` `total_hot` int(11) NOT NULL DEFAULT '0' COMMENT '总热度' AFTER `monthly_hot`, 
	CHANGE COLUMN `type` `type` tinyint(4) NOT NULL COMMENT '提及或所属' AFTER `total_hot`, 
	CHANGE COLUMN `status` `status` tinyint(4) NOT NULL COMMENT '状态' AFTER `type`, 
	CHANGE COLUMN `create_date` `create_date` datetime NOT NULL COMMENT '创建时间' AFTER `status`, 
	CHANGE COLUMN `update_date` `update_date` datetime NOT NULL COMMENT '更新时间' AFTER `create_date`;
ALTER TABLE `DB_TUSI`.`tb_post_topic` ADD COLUMN `uid` int NOT NULL COMMENT '发帖人uid' AFTER `id`, 
	CHANGE COLUMN `post_id` `post_id` int(11) NOT NULL COMMENT '帖子id' AFTER `uid`, 
	CHANGE COLUMN `topic_id` `topic_id` int(11) DEFAULT '0' COMMENT '话题id' AFTER `post_id`, 
	CHANGE COLUMN `daily_hot` `daily_hot` int(11) NOT NULL DEFAULT '0' COMMENT '天热度' AFTER `topic_id`, 
	CHANGE COLUMN `weekly_hot` `weekly_hot` int(11) NOT NULL DEFAULT '0' COMMENT '周热度' AFTER `daily_hot`, 
	CHANGE COLUMN `monthly_hot` `monthly_hot` int(11) NOT NULL DEFAULT '0' COMMENT '月热度' AFTER `weekly_hot`, 
	CHANGE COLUMN `total_hot` `total_hot` int(11) NOT NULL DEFAULT '0' COMMENT '总热度' AFTER `monthly_hot`, 
	CHANGE COLUMN `type` `type` tinyint(4) NOT NULL COMMENT '运营加入或在话题页发布自动加入' AFTER `total_hot`, 
	CHANGE COLUMN `status` `status` tinyint(4) NOT NULL COMMENT '状态' AFTER `type`, 
	CHANGE COLUMN `create_date` `create_date` datetime NOT NULL COMMENT '创建时间' AFTER `status`, 
	CHANGE COLUMN `update_date` `update_date` datetime NOT NULL AFTER `create_date`;

ALTER TABLE `DB_TUSI`.`tb_mood` 
	ADD COLUMN `name` varchar(255) NOT NULL COMMENT '心情名' AFTER `id`, 
	CHANGE COLUMN `category_id` `category_id` int(11) NOT NULL COMMENT '心情类别' AFTER `name`, 
	CHANGE COLUMN `category_name` `category_name` varchar(255) NOT NULL COMMENT '心情类别名' AFTER `category_id`, 
	CHANGE COLUMN `level` `level` tinyint(4) NOT NULL COMMENT '心情程度编号' AFTER `category_name`, 
	CHANGE COLUMN `pic_url` `pic_url` varchar(255) NOT NULL COMMENT '图片地址' AFTER `level`, 
	CHANGE COLUMN `sequence` `sequence` tinyint(4) NOT NULL COMMENT '序号' AFTER `pic_url`, 
	CHANGE COLUMN `status` `status` tinyint(4) NOT NULL COMMENT 'status' AFTER `sequence`, 
	CHANGE COLUMN `create_date` `create_date` datetime NOT NULL COMMENT '创建时间' AFTER `status`, 
	CHANGE COLUMN `update_date` `update_date` datetime NOT NULL COMMENT '更新时间' AFTER `create_date`;

ALTER TABLE `DB_TUSI`.`tb_mood` 
	ADD COLUMN `name` varchar(255) NOT NULL COMMENT '心情名' AFTER `id`, 
	CHANGE COLUMN `category_id` `category_id` int(11) NOT NULL COMMENT '心情类别' AFTER `name`, 
	CHANGE COLUMN `category_name` `category_name` varchar(255) NOT NULL COMMENT '心情类别名' AFTER `category_id`, 
	CHANGE COLUMN `level` `level` tinyint(4) NOT NULL COMMENT '心情程度编号' AFTER `category_name`, 
	CHANGE COLUMN `pic_url` `pic_url` varchar(255) NOT NULL COMMENT '图片地址' AFTER `level`, 
	CHANGE COLUMN `sequence` `sequence` tinyint(4) NOT NULL COMMENT '序号' AFTER `pic_url`, 
	CHANGE COLUMN `status` `status` tinyint(4) NOT NULL COMMENT 'status' AFTER `sequence`, 
	CHANGE COLUMN `create_date` `create_date` datetime NOT NULL COMMENT '创建时间' AFTER `status`, 
	CHANGE COLUMN `update_date` `update_date` datetime NOT NULL COMMENT '更新时间' AFTER `create_date`;

ALTER TABLE `DB_TUSI`.`tb_post_comment` 
	CHANGE COLUMN `content` `content` varchar(500) NOT NULL COMMENT '评论内容';

ALTER TABLE `DB_TUSI`.`tb_company` ADD COLUMN `button_value` varchar(255) DEFAULT '' COMMENT '按钮文字' AFTER `industry_id`, CHANGE COLUMN `background` `background` varchar(255) NOT NULL DEFAULT '' COMMENT '背景' AFTER `button_value`, CHANGE COLUMN `type` `type` tinyint(4) NOT NULL DEFAULT '1' COMMENT '公司类型：1 运营导入，2 用户创建，3 公司别名' AFTER `background`, CHANGE COLUMN `status` `status` tinyint(4) NOT NULL DEFAULT '0' COMMENT '公司状态' AFTER `type`, CHANGE COLUMN `create_date` `create_date` datetime NOT NULL COMMENT '创建时间' AFTER `status`, CHANGE COLUMN `update_date` `update_date` datetime NOT NULL COMMENT '更新时间' AFTER `create_date`;

ALTER TABLE `DB_TUSI`.`tb_topic` ADD COLUMN `button_value` varchar(255) DEFAULT '' COMMENT '按钮文字' AFTER `background`, CHANGE COLUMN `post_cnt` `post_cnt` int(11) NOT NULL DEFAULT '0' COMMENT '帖子：真实数' AFTER `button_value`, CHANGE COLUMN `post_cnt_op` `post_cnt_op` int(11) NOT NULL DEFAULT '0' COMMENT '帖子：运营数' AFTER `post_cnt`, CHANGE COLUMN `post_cnt_total` `post_cnt_total` int(11) NOT NULL DEFAULT '0' COMMENT '帖子：总数' AFTER `post_cnt_op`, CHANGE COLUMN `praise_cnt` `praise_cnt` int(11) NOT NULL DEFAULT '0' COMMENT '赞：真实数' AFTER `post_cnt_total`, CHANGE COLUMN `praise_cnt_op` `praise_cnt_op` int(11) NOT NULL DEFAULT '0' COMMENT '赞：运营数' AFTER `praise_cnt`, CHANGE COLUMN `praise_cnt_total` `praise_cnt_total` int(11) NOT NULL DEFAULT '0' COMMENT '赞：总数' AFTER `praise_cnt_op`, CHANGE COLUMN `comment_cnt` `comment_cnt` int(11) NOT NULL DEFAULT '0' COMMENT '评论：真实数' AFTER `praise_cnt_total`, CHANGE COLUMN `comment_cnt_op` `comment_cnt_op` int(11) NOT NULL DEFAULT '0' COMMENT '评论：运营数' AFTER `comment_cnt`, CHANGE COLUMN `comment_cnt_total` `comment_cnt_total` int(11) NOT NULL DEFAULT '0' COMMENT '评论：总数' AFTER `comment_cnt_op`, CHANGE COLUMN `comment_praise_cnt` `comment_praise_cnt` int(11) NOT NULL DEFAULT '0' COMMENT '评论赞：总数' AFTER `comment_cnt_total`, CHANGE COLUMN `status` `status` tinyint(4) NOT NULL DEFAULT '1' COMMENT '话题状态' AFTER `comment_praise_cnt`, CHANGE COLUMN `create_date` `create_date` datetime NOT NULL COMMENT '创建时间' AFTER `status`, CHANGE COLUMN `update_date` `update_date` datetime NOT NULL COMMENT '更新时间' AFTER `create_date`;

ALTER TABLE `DB_TUSI`.`tb_post_geo` ADD COLUMN `address` varchar(255) DEFAULT '' COMMENT '地址' AFTER `location3`, CHANGE COLUMN `daily_hot` `daily_hot` int(11) NOT NULL DEFAULT '0' COMMENT '天热度' AFTER `address`, CHANGE COLUMN `weekly_hot` `weekly_hot` int(11) NOT NULL DEFAULT '0' COMMENT '周热度' AFTER `daily_hot`, CHANGE COLUMN `monthly_hot` `monthly_hot` int(11) NOT NULL DEFAULT '0' COMMENT '月热度' AFTER `weekly_hot`, CHANGE COLUMN `total_hot` `total_hot` int(11) NOT NULL DEFAULT '0' COMMENT '总热度' AFTER `monthly_hot`, CHANGE COLUMN `status` `status` tinyint(4) NOT NULL COMMENT '帖子状态' AFTER `total_hot`, CHANGE COLUMN `create_date` `create_date` datetime NOT NULL COMMENT '创建时间' AFTER `status`, CHANGE COLUMN `update_date` `update_date` datetime NOT NULL COMMENT '更新时间' AFTER `create_date`;

ALTER TABLE `DB_TUSI`.`tb_topic_hot` ADD COLUMN `background` varchar(100) NOT NULL DEFAULT '' COMMENT '背景' AFTER `pic_url`;

ALTER TABLE `DB_TUSI`.`tb_company_hot` ADD COLUMN `edit_name` varchar(32) NOT NULL DEFAULT '' COMMENT '运营编辑的热门公司展示名称' AFTER `company_id`;

ALTER TABLE `DB_TUSI`.`tb_recommend_place` 
	ADD COLUMN `icon` varchar(255) NOT NULL DEFAULT '' COMMENT '推荐位icon' AFTER `subject`,
	ADD COLUMN `button_value` varchar(32) NOT NULL DEFAULT '' COMMENT '按钮文字' AFTER `pic_url`;

ALTER TABLE `DB_TUSI`.`tb_company_alias` 
	ADD INDEX `idx_alias_company_id` (company_id);
ALTER TABLE `DB_TUSI`.`tb_company_follow` 
	ADD INDEX `idx_follow_uid` (uid), 
	ADD INDEX `idx_follow_company_id` (company_id);
ALTER TABLE `DB_TUSI`.`tb_company_search_log` 
	ADD INDEX `idx_search_uid` (uid);
ALTER TABLE `DB_TUSI`.`tb_post_geo` 
	ADD INDEX `idx_geo_ location1` (location1), 
	ADD INDEX `idx_geo_ location2` (location2), 
	ADD INDEX `idx_geo_ location3` (location3);
ALTER TABLE `DB_TUSI`.`tb_post_topic` 
	ADD INDEX `idx_topic_post_id` (post_id), 
	ADD INDEX `idx_topic_topic_id` (topic_id);
ALTER TABLE `DB_TUSI`.`tb_post_company` 
	ADD INDEX `idx_company_post_id` (post_id), 
	ADD INDEX `idx_company_company_id` (company_id);
ALTER TABLE `DB_TUSI`.`tb_post` 
	ADD INDEX `idx_post_uid` (uid), 
	ADD INDEX `idx_post_company_id` (company_id), 
	ADD INDEX `idx_post_update_date` (update_date);
ALTER TABLE `DB_TUSI`.`tb_post_comment` 
	ADD INDEX `idx_comment_post_id` (post_id), 
	ADD INDEX `idx_comment_uid` (uid), 
	ADD INDEX `idx_comment_company_id` (company_id);
ALTER TABLE `DB_TUSI`.`tb_user` 
	ADD INDEX `tb_user_company_id` (company_id);
ALTER TABLE `DB_TUSI`.`tb_user_bind` 
	ADD INDEX `idx_bind_uid` (uid), 
	ADD INDEX `idx_bind_open_id` (open_id);
ALTER TABLE `DB_TUSI`.`tb_user_message` 
	ADD INDEX `idx_message_uid` (uid);


ALTER TABLE `DB_TUSI`.`tb_company` AUTO_INCREMENT=6000000;
ALTER TABLE `DB_TUSI`.`tb_post` AUTO_INCREMENT=5000000;
ALTER TABLE `DB_TUSI`.`tb_user` AUTO_INCREMENT=4000000;
ALTER TABLE `DB_TUSI`.`tb_topic` AUTO_INCREMENT=3000000;


CREATE TABLE IF NOT EXISTS `DB_TUSI`.`tb_backend_push` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '自增ID',
  `type` TINYINT NULL COMMENT 'PUSH类型：\n1:全量\n2:公司\n3:用户\n4:产品升级',
  `target_ids` TEXT NULL COMMENT 'push返回ID',
  `title_tag` VARCHAR(255) NULL COMMENT 'push标题',
  `content` VARCHAR(500) NULL COMMENT 'push文案',
  `goto_type` TINYINT NULL COMMENT '跳转类型：\n1：话题\n2：帖子\n3：公司\n4：首页\n5：发帖页',
  `goto_id` INT NULL COMMENT '跳转ID',
  `is_ios` TINYINT NULL COMMENT '是否push,IOS\n1:全部\n2:制定版本\n3:不发送',
  `is_android` TINYINT NULL COMMENT '是否push，android:\n1:全部\n2:制定版本\n3:不发送',
  `ios_versions` VARCHAR(500) NULL COMMENT '苹果版本号',
  `android_versions` VARCHAR(500) NULL COMMENT 'android版本号',
  `ios_down_url` VARCHAR(500) NULL COMMENT 'iOS下载地址',
  `android_down_url` VARCHAR(500) NULL COMMENT 'android下载地址',
  `status` TINYINT NULL COMMENT '状态',
  `start_date` DATETIME NULL COMMENT '发送时间',
  `create_date` DATETIME NULL COMMENT '添加时间',
  `update_date` DATETIME NULL COMMENT '修改时间',
  PRIMARY KEY (`id`))
ENGINE = InnoDB
COMMENT = '后台push表'

ALTER TABLE `DB_TUSI`.`tb_user` CHANGE COLUMN `app_version` `app_version` double NOT NULL COMMENT '客户端版本';





